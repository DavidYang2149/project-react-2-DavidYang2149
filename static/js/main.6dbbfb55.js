(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{22:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return g}));var r=n(54),a=n(9),i=n(5);const c=a.c.FieldValue;async function s(e){return a.b.collection("recipes").doc(e).get()}async function d(e){const t=a.b.collection("recipes");if(Object(i.e)(e)){return(await t.orderBy("created","desc").limit(i.a).get()).docs}var n;return(await t.orderBy("created","desc").startAfter((n=e.created,a.c.Timestamp.fromDate(new Date(n)))).limit(i.a).get()).docs}async function o(e){const{currentUser:{email:t}}=a.a;if(Object(i.j)(t)){const{id:n}=await a.b.collection("recipes").add({...e,userId:t,created:c.serverTimestamp(),updated:c.serverTimestamp(),show:!0});return n}return null}async function u(e){const{currentUser:{email:t}}=a.a;if(Object(i.j)(t)){const{id:n,title:r,category:i,product:s,ingredients:d,description:o,image:u}=e;await a.b.collection("recipes").doc(n).update({userId:t,title:r,category:i,product:s,ingredients:d,description:o,image:u,updated:c.serverTimestamp()})}}async function l({id:e,userId:t}){const{currentUser:{email:n}}=a.a;Object(i.j)(n)&&Object(i.h)(t)(n)&&await a.b.collection("recipes").doc(e).delete()}async function p({userId:e,upload:t,uuid:n=Object(r.v4)()}){const c=await a.e.ref().child(`${Object(i.d)(e)("@")}/${n}`);return(await c.putString(t,"data_url")).ref.getDownloadURL()}async function g({image:e}){await a.e.refFromURL(e).delete()}},33:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return u}));var r=n(23),a=n(9),i=n(37);const{actions:c,reducer:s}=Object(r.b)({name:"user",initialState:{userId:"",displayName:""},reducers:{setUser:(e,{payload:{name:t,value:n}})=>({...e,[t]:n}),clearUser:e=>({...e,userId:"",displayName:""})}});function d(){return async e=>{setTimeout(()=>{const t=a.a.currentUser||Object(i.a)("user");t?(Object(i.b)("user",t.email),e(c.setUser({name:"userId",value:t.email}))):e(c.clearUser())},1300)}}const{setUser:o,clearUser:u}=c;t.b=s},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));const r=(e,t)=>{sessionStorage.setItem(e,t)},a=e=>sessionStorage.getItem(e)},42:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"l",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return w})),n.d(t,"h",(function(){return j})),n.d(t,"k",(function(){return y}));var r=n(23),a=n(22),i=n(5);const c={id:0,userId:"",title:"",category:0,product:0,ingredients:[],newIngredient:{id:0,ingredient:"",weight:0},description:"",upload:null,image:null},{actions:s,reducer:d}=Object(r.b)({name:"recipe",initialState:c,reducers:{setRecipe:(e,{payload:t})=>({...e,...t,newIngredient:{id:t.ingredients.length+1,ingredient:"",weight:0}}),setNewIngredient:(e,{payload:{fields:t}})=>({...e,ingredients:[t,...e.ingredients],newIngredient:{id:0,ingredient:"",weight:0}}),changeRecipe:(e,{payload:{name:t,value:n}})=>Object(i.h)(t)("product")?{...e,[t]:parseInt(n,10)}:{...e,[t]:n},changeIngredient(e,{payload:{name:t,value:n}}){const[r,a]=t.split("-");return Object(i.h)(r)("weight")?{...e,ingredients:e.ingredients.map(e=>parseInt(e.id,10)===parseInt(a,10)?{...e,[r]:parseInt(n,10)}:e)}:{...e,ingredients:e.ingredients.map(e=>parseInt(e.id,10)===parseInt(a,10)?{...e,[r]:n}:e)}},changeNewIngredient(e,{payload:{name:t,value:n}}){const[r,a]=t.split("-");return Object(i.h)(r)("weight")?{...e,newIngredient:{...e.newIngredient,id:parseInt(a,10),[r]:parseInt(n,10)}}:{...e,newIngredient:{...e.newIngredient,id:parseInt(a,10),[r]:n}}},clearRecipe:e=>({...e,...c}),removeIngredient(e,{payload:{value:t}}){const n=e.ingredients.length-1;return{...e,ingredients:e.ingredients.filter(e=>parseInt(e.id,10)!==parseInt(t,10)).map((e,t)=>({id:n-t,ingredient:e.ingredient,weight:e.weight})),newIngredient:{...e.newIngredient,id:parseInt(n+1,10)}}},swapIngredients(e,{payload:{originIndex:t,destinationIndex:n}}){const r=[...e.ingredients],a=r[t];r.splice(t,1),r.splice(n,0,a);const{length:i}=r;return{...e,ingredients:r.map((e,t)=>({...e,id:i-t}))}}}});function o(e){return async t=>{const n=await Object(a.c)(e);n.exists?t(s.setRecipe(Object(i.c)(n))):t(s.setRecipe(c))}}function u(){return async(e,t)=>{const{user:{userId:n},recipe:{id:r,title:c,category:s,product:d,ingredients:u,description:l,upload:p,image:g}}=t();if(Object(i.e)(n))return;if(Object(i.e)(c.trim())||Object(i.e)(s)||Object(i.e)(d)||Object(i.e)(l.trim()))return;let m="";if(Object(i.j)(p)&&Object(i.j)(g)&&(await Object(a.a)({image:g}),m=await Object(a.e)({userId:n,upload:p})),Object(i.j)(p)&&Object(i.e)(g)&&(m=await Object(a.e)({userId:n,upload:p})),Object(i.e)(r)){const t={userId:n,title:c,category:s,product:d,ingredients:u,description:l,image:m||g},r=await Object(a.f)(t);return void await e(o(r))}const b={id:r,title:c,category:s,product:d,ingredients:u,description:l,image:m||g};await Object(a.g)(b),await e(o(r))}}function l(){return async(e,t)=>{const{recipe:n}=t(),{id:r,userId:i}=n;await Object(a.b)({id:r,userId:i}),e(s.clearRecipe())}}function p(){return async(e,t)=>{const{recipe:{image:n}}=t();Object(i.e)(n)||(await Object(a.a)({image:n}),e(s.changeRecipe({name:"image",value:null})))}}const{setRecipe:g,setNewIngredient:m,changeRecipe:b,changeIngredient:f,changeNewIngredient:h,clearRecipe:w,removeIngredient:j,swapIngredients:y}=s;t.e=d},43:function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(31);const c=i.a.div`
  position: absolute;
  display: inline-block;
  width: 75px;
  height: 75px;
  border: 10px solid hotpink;
  border-color: hotpink transparent transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;

  @keyframes spin {
    100% {
    transform: rotate(360deg);
    }
  }
`,s=i.a.div`
  display: flex;
  justify-content: center;
  align-items: center;
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(245, 234, 234, 0.3);
`;t.a=()=>a.a.createElement(s,null,a.a.createElement(c,null))},44:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return o}));var r=n(23),a=n(22),i=n(5);const{actions:c,reducer:s}=Object(r.b)({name:"recipes",initialState:{recipesBook:[],lastRecipe:{recipe:null,isLast:!1}},reducers:{setRecipes:(e,{payload:t})=>({...e,recipesBook:[...t]}),setLastRecipe:(e,{payload:{name:t,value:n}})=>({...e,lastRecipe:{...e.lastRecipe,[t]:n}}),addRecipes:(e,{payload:t})=>({...e,recipesBook:[...e.recipesBook,...t]})}});function d(){return async(e,t)=>{const{recipes:{lastRecipe:{recipe:n,isLast:r}}}=t();if(r)return;const s=await Object(a.d)(n);if(Object(i.e)(s))return void e(c.setRecipes([]));const d=s.map(e=>Object(i.c)(e));e(c.addRecipes(d)),e(c.setLastRecipe({name:"recipe",value:d[d.length-1]})),e(c.setLastRecipe({name:"isLast",value:!1})),d.length<i.a&&e(c.setLastRecipe({name:"isLast",value:!0}))}}function o(){return async e=>{const t=(await Object(a.d)()).map(e=>Object(i.c)(e));e(c.setRecipes(t)),e(c.setLastRecipe({name:"recipe",value:t[t.length-1]})),e(c.setLastRecipe({name:"isLast",value:!1}))}}const{setRecipes:u,setLastRecipe:l,addRecipes:p}=c;t.a=s},45:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return l}));var r=n(23),a=n(9),i=n(5);const{actions:c,reducer:s}=Object(r.b)({name:"chat",initialState:{chatList:[],message:""},reducers:{setChatList:(e,{payload:t})=>({...e,chatList:[...t]}),changeMessage:(e,{payload:{name:t,value:n}})=>({...e,[t]:n}),clearMessage:e=>({...e,message:""})}});function d(){return async e=>{const t=(await async function(){const e=a.b.collection("messages");return(await e.orderBy("created").get()).docs}()).map(e=>Object(i.b)(e));e(c.setChatList(t))}}function o(){return async(e,t)=>{const{user:{userId:n},chat:{message:r}}=t();Object(i.e)(n)||(await async function(e){const{currentUser:{email:t}}=a.a;if(Object(i.j)(t)){const{id:n}=await a.b.collection("messages").add({user:Object(i.d)(t)("@"),message:e.message,created:a.c.FieldValue.serverTimestamp(),show:!0});return n}return null}({userId:n,message:r}),await e(c.clearMessage()),await e(d()))}}const{setChatList:u,changeMessage:l}=c;t.b=s},5:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"j",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"k",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return m}));const r=e=>!e,a=e=>!r(e),i=e=>t=>e===t,c=e=>t=>!i(e)(t),s=e=>!(e=>Array.isArray(e))(e),d=e=>t=>e>t,o=e=>t=>e<t,u=e=>!r(e)&&e.toDate().toISOString(),l=e=>t=>e.split(t)[0],p=e=>{const{created:t,updated:n}=e.data();return{...e.data(),id:e.id,created:u(t),updated:u(n)}},g=e=>{const{created:t}=e.data();return{...e.data(),created:u(t)}},m=12},79:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(28),c=n.n(i),s=n(25),d=n(35),o=n(7),u=n(33),l=n(43);var p=n(31).a.div`
  box-sizing: border-box;
  background-color: #fff;
  padding-top: 30px;
  padding-bottom: 30px;
  margin: 20px auto;
  width: 100vw;
  height: 100vh;
  
  @media screen and (min-width: 600px) {
    width: 600px;
  }

  @media screen and (min-width: 768px) {
    width: 768px;
  }

  /* @media screen and (min-width: 1024px) {
    width: 1024px;
  } */
`;const g=Object(r.lazy)(()=>n.e(23).then(n.bind(null,90))),m=Object(r.lazy)(()=>n.e(24).then(n.bind(null,88))),b=Object(r.lazy)(()=>Promise.all([n.e(5),n.e(2),n.e(12),n.e(11),n.e(3),n.e(13),n.e(8),n.e(14),n.e(10),n.e(6),n.e(4),n.e(9),n.e(7),n.e(16),n.e(15),n.e(0),n.e(1),n.e(20)]).then(n.bind(null,91))),f=Object(r.lazy)(()=>Promise.all([n.e(5),n.e(2),n.e(12),n.e(11),n.e(3),n.e(13),n.e(8),n.e(14),n.e(10),n.e(6),n.e(4),n.e(9),n.e(7),n.e(16),n.e(15),n.e(0),n.e(1),n.e(19)]).then(n.bind(null,92))),h=Object(r.lazy)(()=>n.e(21).then(n.bind(null,87))),w=Object(r.lazy)(()=>n.e(22).then(n.bind(null,89)));var j=()=>{const e=Object(s.c)();return Object(r.useEffect)(()=>{e(Object(u.c)())},[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(l.a,null)},a.a.createElement(g,null),a.a.createElement(p,null,a.a.createElement(o.c,null,a.a.createElement(o.a,{exact:!0,path:"/",component:m}),a.a.createElement(o.a,{path:"/recipe/:id",component:b}),a.a.createElement(o.a,{path:"/recipewrite/:id",component:f}),a.a.createElement(o.a,{path:"/chat",component:w}),a.a.createElement(o.a,{component:h})))))},y=n(23),I=n(13),O=n(42),v=n(44),R=n(45);var x=Object(I.c)({user:u.b,recipe:O.e,recipes:v.a,chat:R.b});var L=Object(y.a)({reducer:x});c.a.render(a.a.createElement(s.a,{store:L},a.a.createElement(d.a,null,a.a.createElement(j,null))),document.getElementById("app"))},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return o}));var r=n(27);n(66),n(68),n(71);var a={apiKey:"AIzaSyBWq2ijQg3f9QqIx3gDKsYda0wIeed5zqE",authDomain:"mybakingrecipe.firebaseapp.com",databaseURL:"https://mybakingrecipe-default-rtdb.firebaseio.com",projectId:"mybakingrecipe",storageBucket:"mybakingrecipe.appspot.com",messagingSenderId:"915152243690",appId:"1:915152243690:web:eabd6afc6124e887434093",measurementId:"G-R8B8QCRYLB",status:"production"};r.a.initializeApp(a);const i=r.a.auth(),c=r.a.firestore,s=r.a.firestore(),d=new r.a.auth.GoogleAuthProvider,o=r.a.storage()}},[[79,18,5,2,12,11,3,13,8,14,10,6,4,9,7,16,15,0,1]]]);